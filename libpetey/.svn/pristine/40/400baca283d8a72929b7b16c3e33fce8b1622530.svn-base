
long *invert_mapping(long *ind, long n) {
  long *result;
  result=new long[n];
  for (long i=0; i<n; i++) result[ind[i]]=i;
  return result;
}

template <class dtype>
void garbage_day(dtype (*garbage_man)(dtype *), dtype *a, long *ind, long nbad) {
  for (long i=0; i<nbad; i++) a[ind[i]]=(*garbage_man) (a[ind[i]]);
}

for (long i=0; i<nbad; i++) {
  delete a[ind[i]];
  a[ind[i]]=NULL;
}

garbage_day(&t_free, a, ind, nbad);

//t_free function for reference:
a_t *t_free(a_t *bad) {
  delete bad;
  return NULL;
}


